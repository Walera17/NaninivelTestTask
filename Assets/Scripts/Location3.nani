@back Loc3 time:1


@stop

# GetWeapon
@back Loc3 time:1
@char SwordGame.Deselect pos:75,80 if:"!pathHelmet && triesSword==0"
@char HelmetGame.Deselect pos:75,40 if:"pathHelmet && triesHelmet==0"
@show SwordGame if:triesSword>0
@show HelmetGame if:triesHelmet>0

@printer Dialogue

@print text:"Выберете объект на карте и Вы перейдете в мини игру, где нужно уничтожить всех врагов, чтобы получить приз."
@hidePrinter
@stopBgm Locat2 fade:1 wait:false
@bgm Game fade:1 wait:false loop:true
@setLabel name:Choices

@if !pathHelmet
    @set triesSword++
    @char SwordGame.Select
    ;@startGame name:GameSword
    @stop
@else
    @set triesHelmet++
    @char HelmetGame.Select
    ;@startGame name:GameHelmet
    @stop

# Choices
@goto .SwordReward if:"RewardExist("Sword") && !RewardExist("Helmet") && !pathHelmet"
@goto .HelmetReward if:"RewardExist("Helmet") && !finishGame"
@char SwordGame.Deselect
@hide SwordGame
@char HelmetGame.Deselect if:triesHelmet>0
@hide HelmetGame if:triesHelmet>0
@goto Location2.Choices

# SwordReward
@unlock SuperSword
@char SwordGame.Deselect
@showLog name:"Меч для Sophie получен"
@print text:"Поздравляем. Вы получили меч!"
@hide SwordGame
@goto Location2.Choices

# HelmetReward
@unlock SuperHelmet
@char HelmetGame.Deselect
@set finishGame=true
@showLog name:"Шлем для Jody получен"
@print text:"Поздравляем. Вы получили шлем!"
@hide HelmetGame,SwordGame
@goto Location2.Choices

@stop